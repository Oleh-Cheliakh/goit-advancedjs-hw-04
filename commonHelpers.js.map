{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst searchForm = document.querySelector('.search-form');\nconst galleryContainer = document.querySelector('.gallery');\nlet currentPage = 1;\nlet currentQuery;\n\nconst NOTIFICATION_INFO_SETTINGS = {\n  message:\n    'Sorry, there are no images matching your search query. Please try again.',\n  color: 'yellow',\n  position: 'topRight',\n  transitionIn: 'fadeInDown',\n};\n\nconst NOTIFICATION_ERROR_SETTINGS = {\n  message: \"We're sorry, but you've reached the end of search results.\",\n  color: 'red',\n  position: 'topRight',\n  transitionIn: 'fadeInDown',\n};\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n  galleryContainer.innerHTML = '';\n\n  const formValue = new FormData(event.currentTarget);\n  const { searchQuery } = Object.fromEntries(formValue.entries());\n  currentQuery = searchQuery;\n  event.currentTarget.reset();\n  currentPage = 1;\n  return searchQuery;\n}\n\nsearchForm.addEventListener('submit', event => {\n  handleSubmit(event);\n});\n\nfunction createMarkup(data) {\n  const markup = data\n    .map(({ webformatURL, tags, likes, views, comments, downloads }) => {\n      return `<div class=\"photo-card\">\n          <img src=${webformatURL} alt=${tags} loading=\"lazy\" />\n          <div class=\"info\">\n              <p class=\"info-item\">\n                <b>Likes</b>\n                ${likes}\n              </p>\n              <p class=\"info-item\">\n                <b>Views</b>\n                ${views}\n              </p>\n              <p class=\"info-item\">\n                  <b>Comments</b>\n                  ${comments}\n              </p>\n              <p class=\"info-item\">\n                  <b>Downloads</b>\n                  ${downloads}\n              </p>\n          </div>\n        </div>`;\n    })\n    .join('');\n\n  galleryContainer.insertAdjacentHTML('afterbegin', markup);\n}\n\nfunction showMessage(type) {\n  let messageType = type.toLowerCase();\n  if (messageType === 'info') {\n    return iziToast.show(NOTIFICATION_INFO_SETTINGS);\n  }\n\n  return iziToast.show(NOTIFICATION_ERROR_SETTINGS);\n}\n\nfunction loadMore() {\n  currentPage += 1;\n  getPhotos(currentQuery, currentPage);\n}\n\nasync function getPhotos(query, page) {\n  const API_KEY = '42008350-fb6f0dd148ae0c7c4d4cd1d49';\n\n  const responseAPI = await axios.get('https://pixabay.com/api/', {\n    params: {\n      key: API_KEY,\n      q: `${query}`,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 40,\n      page: `${page}`,\n    },\n  });\n\n  const photos = await responseAPI.data.hits.map(\n    ({\n      webformatURL,\n      largeImageURL,\n      tags,\n      likes,\n      views,\n      comments,\n      downloads,\n    }) => {\n      return {\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      };\n    }\n  );\n  return photos;\n}\n"],"names":["searchForm","galleryContainer","handleSubmit","event","formValue","searchQuery"],"mappings":"0uBAIA,MAAMA,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAmB,SAAS,cAAc,UAAU,EAmB1D,SAASC,EAAaC,EAAO,CAC3BA,EAAM,eAAc,EACpBF,EAAiB,UAAY,GAE7B,MAAMG,EAAY,IAAI,SAASD,EAAM,aAAa,EAC5C,CAAE,YAAAE,CAAW,EAAK,OAAO,YAAYD,EAAU,QAAO,CAAE,EAE9D,OAAAD,EAAM,cAAc,QAEbE,CACT,CAEAL,EAAW,iBAAiB,SAAUG,GAAS,CAC7CD,EAAaC,CAAK,CACpB,CAAC"}